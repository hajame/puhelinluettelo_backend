{"version":3,"sources":["services/persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","concat","remove","delete","Notification","_ref","message","react_default","a","createElement","className","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","removePerson","e","preventDefault","person","state","find","p","window","confirm","name","personService","setState","notification","filter","catch","error","alert","setNotificationTimeout","addPerson","event","console","log","target","similar","newName","undefined","newPerson","number","newNumber","objectSpread","newPersons","handleNameChange","value","handleNumberChange","handleFilterChange","_this2","_this3","setTimeout","_this4","components_Notification","onChange","onSubmit","type","pers","toLowerCase","includes","map","key","onClick","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.b99fa3fd.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n\tconst request = axios.get(baseUrl)\n\treturn request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n\treturn axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n\treturn axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nconst remove = (id) => {\n\treturn axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default { getAll, create, update, remove }","import React from \"react\"; \n\nconst Notification = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n    return (\n        <div className=\"notification\">\n            {message}\n        </div>\n    )\n}\n\nexport default Notification","import React from 'react';\n// import axios from 'axios';\n// import Person from './components/Person';\n// import Adder from './components/Adder';\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            persons: [],\n            newName: '',\n            newNumber: '',\n            filter: '',\n            notification: null\n        }\n        console.log('constructor')\n    }\n\n    componentDidMount() {\n        personService\n            .getAll()\n            .then(persons => {\n                console.log('promise fulfilled')\n                this.setState({ persons })\n            })\n    }\n\n    setNotificationTimeout() {\n        setTimeout(() => {\n                    this.setState({notification: null})\n                }, 5000)\n    }\n\n    removePerson = (id, e) => {\n        e.preventDefault()\n        const person = this.state.persons.find(p => p.id === id)\n        if (window.confirm(`poistetaanko ${person.name} ?`)) {\n            personService\n                .remove(id)\n                .then(this.setState({\n                    notification: `poistettiin henkilö ${person.name}`,\n                    persons: this.state.persons.filter(p => p.id !== id)\n                }))\n                .catch(error => {\n                    alert(`henkilö '${person.name}' on jo valitettavasti poistettu palvelimelta`)\n                    this.setState({ persons: this.state.persons.filter(p => p.id !== id) })\n                })\n            this.setNotificationTimeout()\n        }\n    }\n\n    addPerson = (event) => {\n        event.preventDefault()\n        console.log('nappia painettu', event.target)\n        let similar = this.state.persons.find(p =>\n            p.name === this.state.newName)\n        if (similar !== undefined) {\n            console.log('on jo', similar)\n            if (window.confirm(\n                `${similar.name} on jo luettelossa, korvataanko vanha numero uudella?`)) {\n                similar.number = this.state.newNumber\n                let newPersons = this.state.persons.filter(p => p.id !== similar.id)\n                newPersons = newPersons.concat(similar)\n                personService\n                    .update(similar.id, similar)\n                    .then(response => {\n                        this.setState({\n                            ...this.state,\n                            notification: `korvattiin henkilön ${similar.name} numero`,\n                            persons: newPersons,\n                            newName: '', newNumber: ''\n                        })\n                        this.setNotificationTimeout()  \n                    })\n                    .catch(error => {\n                        alert(`henkilö '${similar.name}' on jo valitettavasti poistettu palvelimelta`)\n                        this.setState({ persons: this.state.persons.filter(p => p.id !== similar.id) })\n                    })\n            }\n            return\n        }\n        const newPerson = {\n            name: this.state.newName,\n            number: this.state.newNumber\n        }\n        personService\n            .create(newPerson)\n            .then(response => {\n                this.setState({\n                    ...this.state,\n                    notification: `lisättiin ${newPerson.name}`,\n                    persons: this.state.persons.concat(response.data),\n                    newName: '', newNumber: ''\n                })\n                this.setNotificationTimeout()\n            })\n        console.log('lisättiin', newPerson)\n        console.log('uusi state', this.state)\n    }\n\n    handleNameChange = (event) => this.setState({ newName: event.target.value })\n    handleNumberChange = (event) => this.setState({ newNumber: event.target.value })\n    handleFilterChange = (event) => this.setState({ filter: event.target.value })\n\n    render() {\n        console.log('render')\n        return (\n            <div>\n                <h1>Puhelinluettelo</h1>\n                <Notification message={this.state.notification} />\n                <div>rajaa näytettäviä <input value={this.state.filter}\n                    onChange={this.handleFilterChange} />\n                </div>\n                <h3>Lisää uusi</h3>\n                <form onSubmit={this.addPerson}>\n                    <div>\n                        nimi: <input value={this.state.newName}\n                            onChange={this.handleNameChange} />\n                    </div>\n                    <div>\n                        numero: <input value={this.state.newNumber}\n                            onChange={this.handleNumberChange} />\n                    </div>\n                    <div>\n                        <button type=\"submit\">lisää</button>\n                    </div>\n                </form>\n                <h2>Numerot</h2>\n                <table>\n                    <tbody>\n                        {this.state.persons.filter(pers => (\n                            pers.name.toLowerCase().includes(this.state.filter.toLowerCase())\n                        )).map(person =>\n                            <tr className='person' key={person.id}>\n                                <td>{person.name}</td>\n                                <td>{person.number}</td>\n                                <td>\n                                    <button onClick={(e) => this.removePerson(person.id, e)}>poista</button>\n                                </td>\n                            </tr>\n                        )}\n                        {/* todo eristä filtteröinti */}\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from \"./App\";\nimport './index.css'\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n)"],"sourceRoot":""}