(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(11),r=n.n(i),l=n(4),u=n(12),s=n(13),c=n(15),m=n(14),f=n(16),d=n(2),p=n.n(d),h="/api/persons",v={getAll:function(){return p.a.get(h).then(function(e){return e.data})},create:function(e){return p.a.post(h,e)},update:function(e,t){return p.a.put("".concat(h,"/").concat(e),t)},remove:function(e){return p.a.delete("".concat(h,"/").concat(e))}},b=function(e){var t=e.message;return null===t?null:o.a.createElement("div",{className:"notification"},t)},g=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).removePerson=function(e,t){t.preventDefault();var a=n.state.persons.find(function(t){return t.id===e});window.confirm("poistetaanko ".concat(a.name," ?"))&&(v.remove(e).then(n.setState({notification:"poistettiin henkil\xf6 ".concat(a.name),persons:n.state.persons.filter(function(t){return t.id!==e})})).catch(function(t){alert("henkil\xf6 '".concat(a.name,"' on jo valitettavasti poistettu palvelimelta")),n.setState({persons:n.state.persons.filter(function(t){return t.id!==e})})}),n.setNotificationTimeout())},n.addPerson=function(e){e.preventDefault(),console.log("nappia painettu",e.target);var t=n.state.persons.find(function(e){return e.name===n.state.newName});if(void 0===t){var a={name:n.state.newName,number:n.state.newNumber};v.create(a).then(function(e){n.setState(Object(l.a)({},n.state,{notification:"lis\xe4ttiin ".concat(a.name),persons:n.state.persons.concat(e.data),newName:"",newNumber:""})),n.setNotificationTimeout()}),console.log("lis\xe4ttiin",a),console.log("uusi state",n.state)}else if(console.log("on jo",t),window.confirm("".concat(t.name," on jo luettelossa, korvataanko vanha numero uudella?"))){t.number=n.state.newNumber;var o=n.state.persons.filter(function(e){return e.id!==t.id});o=o.concat(t),v.update(t.id,t).then(function(e){n.setState(Object(l.a)({},n.state,{notification:"korvattiin henkil\xf6n ".concat(t.name," numero"),persons:o,newName:"",newNumber:""})),n.setNotificationTimeout()}).catch(function(e){alert("henkil\xf6 '".concat(t.name,"' on jo valitettavasti poistettu palvelimelta")),n.setState({persons:n.state.persons.filter(function(e){return e.id!==t.id})})})}},n.handleNameChange=function(e){return n.setState({newName:e.target.value})},n.handleNumberChange=function(e){return n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){return n.setState({filter:e.target.value})},n.state={persons:[],newName:"",newNumber:"",filter:"",notification:null},console.log("constructor"),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.getAll().then(function(t){console.log("promise fulfilled"),e.setState({persons:t})})}},{key:"setNotificationTimeout",value:function(){var e=this;setTimeout(function(){e.setState({notification:null})},5e3)}},{key:"render",value:function(){var e=this;return console.log("render"),o.a.createElement("div",null,o.a.createElement("h1",null,"Puhelinluettelo"),o.a.createElement(b,{message:this.state.notification}),o.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4 ",o.a.createElement("input",{value:this.state.filter,onChange:this.handleFilterChange})),o.a.createElement("h3",null,"Lis\xe4\xe4 uusi"),o.a.createElement("form",{onSubmit:this.addPerson},o.a.createElement("div",null,"nimi: ",o.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange})),o.a.createElement("div",null,"numero: ",o.a.createElement("input",{value:this.state.newNumber,onChange:this.handleNumberChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),o.a.createElement("h2",null,"Numerot"),o.a.createElement("table",null,o.a.createElement("tbody",null,this.state.persons.filter(function(t){return t.name.toLowerCase().includes(e.state.filter.toLowerCase())}).map(function(t){return o.a.createElement("tr",{className:"person",key:t.id},o.a.createElement("td",null,t.name),o.a.createElement("td",null,t.number),o.a.createElement("td",null,o.a.createElement("button",{onClick:function(n){return e.removePerson(t.id,n)}},"poista")))}))))}}]),t}(o.a.Component);n(41);r.a.render(o.a.createElement(g,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.8abc35ae.chunk.js.map